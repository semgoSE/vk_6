(this.webpackJsonpplace_quest_test=this.webpackJsonpplace_quest_test||[]).push([[0],{164:function(e,t,a){e.exports=a(269)},269:function(e,t,a){"use strict";a.r(t);a(165),a(191),a(193),a(194),a(196),a(197),a(198),a(199),a(200),a(201),a(202),a(203),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233);var n=a(0),l=a.n(n),i=a(36),s=a.n(i),r=a(26),c=a.n(r),o=a(63),u=a(43),p=a(44),h=a(46),m=a(47),d=a(10),b=a(37),f=a.n(b),g=(a(99),a(45)),E=new g.VKMiniAppAPI,v=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={activeModal:"rating",activeTab:"all"},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){E.initApp()}},{key:"render",value:function(){var e=this;return l.a.createElement(d.k,{activeModal:this.props.activeModal},l.a.createElement(d.i,{id:"rating",onClose:this.props.back,header:l.a.createElement(d.j,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),dynamicContentHeight:!0},l.a.createElement(d.p,null,l.a.createElement(d.q,{selected:"all"==this.state.activeTab,onClick:function(){return e.setState({activeTab:"all"})}},"\u041e\u0431\u0449\u0438\u0439"),l.a.createElement(d.q,{selected:"friends"==this.state.activeTab,onClick:function(){return e.setState({activeTab:"friends"})}},"\u0414\u0440\u0443\u0437\u044c\u044f")),"all"===this.state.activeTab?l.a.createElement("div",null,null!=this.props.rating_all?l.a.createElement(d.h,null,this.props.rating_all.map((function(e,t){return l.a.createElement(d.d,{key:t,before:l.a.createElement(d.a,{src:e.photo_200}),indicator:e.current_ballans,asideContent:"+"+e.k+" /c"},e.name)}))):l.a.createElement(d.o,{size:"large"})):l.a.createElement("div",null)))}}]),a}(l.a.Component),k=a(110),y=a.n(k),_=a(111),S=a.n(_),C=a(112),O=a.n(C),w=a(113),j=a.n(w),M=new g.VKMiniAppAPI,q=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).updateConfig=function(e){n.setState({scheme:e.scheme,o:e})},n.go_rating=function(){f.a.post("https://bot-api-vk.000webhostapp.com/api.place_quests/",JSON.stringify({type:"get_rating"})).then((function(e){console.log(e),n.setState({rating_all:e.data})}))},n.openQRreader=function(){M.openCodeReader().then((function(e){f.a.post("https://bot-api-vk.000webhostapp.com/api.place_quests/",JSON.stringify({type:"set_k",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setState({snackbar:l.a.createElement(d.n,{before:l.a.createElement(O.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")}):n.setState({snackbar:l.a.createElement(d.n,{before:l.a.createElement(j.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok"),user:Object(o.a)({},n.state.user,{k:Number(n.state.user.k)+Number(e.data)})})}))}))},n.state={user:null,userInfo:null,activeModal:null,rating_all:null,snackbar:null,scheme:"bright_light",o:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;M.initApp(),M.onUpdateConfig(this.updateConfig()),f.a.post("https://bot-api-vk.000webhostapp.com/api.place_quests/",JSON.stringify({type:"log_in",obj:{url:window.location.href}})).then((function(t){console.log(t),e.setState({user:t.data})})),setInterval((function(){f.a.post("https://bot-api-vk.000webhostapp.com/api.place_quests/",JSON.stringify({type:"tick",hash:e.state.user.hash})).then((function(t){e.setState({user:Object(o.a)({},e.state.user,{current_ballans:t.data})})}))}),999)}},{key:"render",value:function(){var e=this;return l.a.createElement(d.e,{isWebView:!0,scheme:this.state.scheme},l.a.createElement(d.r,{activePanel:"home",modal:l.a.createElement(v,{activeModal:this.state.activeModal,back:function(){return e.setState({activeModal:null})},rating_all:this.state.rating_all})},l.a.createElement(d.l,{id:"home"},l.a.createElement(d.m,null,"Home"),null==this.state.user?l.a.createElement(d.o,{size:"large"}):l.a.createElement(d.f,{align:"center",header:l.a.createElement(d.g,{mode:"secondary",style:{textAlign:"center"},aside:"+"+this.state.user.k},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442")},l.a.createElement("span",{style:{fontSize:"350%",fontWeight:"bold"}},this.state.user.current_ballans),l.a.createElement(d.c,{style:{paddingTop:20}},l.a.createElement(d.b,{size:"l",style:{backgroundImage:"linear-gradient(135deg, #f24973 0%, #3948e6 100%)"},onClick:this.openQRreader},l.a.createElement("div",{style:{height:85},align:"center"},l.a.createElement(y.a,{fill:"#FFFFFF",style:{marginTop:12}}),l.a.createElement("span",{color:"white",style:{color:"white"}},"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))),l.a.createElement(d.b,{size:"l"},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){e.setState({activeModal:"rating"}),e.go_rating()}},l.a.createElement(S.a,null),l.a.createElement("span",null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433")))),this.state.o),this.state.snackbar)))}}]),a}(l.a.Component);c.a.send("VKWebAppInit"),s.a.render(l.a.createElement(q,null),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.1e00e0ce.chunk.js.map