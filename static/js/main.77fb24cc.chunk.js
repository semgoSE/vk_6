(this.webpackJsonpplace_quest_test=this.webpackJsonpplace_quest_test||[]).push([[0],{126:function(e,t){e.exports="data:image/png;base64,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"},173:function(e,t,a){e.exports=a(278)},278:function(e,t,a){"use strict";a.r(t);a(174),a(200),a(202),a(203),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242);var n=a(0),l=a.n(n),r=a(37),i=a.n(r),s=a(26),o=a.n(s),c=a(67),u=a(44),h=a(45),m=a(46),d=a(49),g=a(50),p=a(3),E=a(27),f=a.n(E),k=(a(104),a(43)),y=a(47),b=a.n(y),C=a(48),v=a(115),A=a.n(v),S=a(116),Q=a.n(S),T=a(117),F=a.n(T),I=new C.VKMiniAppAPI,O="https://bot-api-vk.000webhostapp.com/api.place_quests/",j=function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).set=function(e){switch(e.location){case"":n.setState({activeModal:null});break;case"qr":var t=b.a.createQR(n.props.user.id,{isShowVkLogo:!0});n.setState({activeModal:"qr"}),console.log(document.getElementById("img_qr")),document.getElementById("img_qr").innerHTML=t;break;case"rating":n.setState({activeModal:"rating"}),f.a.post(O,JSON.stringify({type:"get_rating"})).then((function(e){console.log(e),n.setState({rating_all:e.data})})),f.a.post(O,JSON.stringify({type:"get_rating_team"})).then((function(e){n.setState({rating_team:e.data})}));break;case"join":n.setState({activeModal:"join"});break;case"transfer":n.setState({activeModal:"transfer"})}},n.onChange=function(e){var t=e.currentTarget,a=t.name,l=t.value;n.setState(Object(k.a)({},a,l))},n.pay=function(){I.setLocationHash(""),I.openCodeReader().then((function(e){alert(e)}))},n.state={activeModal:null,activeTab:"all",actievedChose:!1,hash:"",rating_team:null,rating_all:null,qr:null,count:0},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){I.initApp(),I.onLocationChanged(this.set)}},{key:"render",value:function(){var e=this;return l.a.createElement(p.n,{activeModal:this.state.activeModal},l.a.createElement(p.l,{id:"rating",onClose:function(){return I.setLocationHash("")},header:l.a.createElement(p.m,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),dynamicContentHeight:!0},l.a.createElement(p.t,null,l.a.createElement(p.u,{selected:"all"==this.state.activeTab,onClick:function(){return e.setState({activeTab:"all"})}},"\u041b\u0438\u0447\u043d\u044b\u0439"),l.a.createElement(p.u,{selected:"friends"==this.state.activeTab,onClick:function(){return e.setState({activeTab:"friends"})}},"\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u044b\u0439")),"all"===this.state.activeTab?l.a.createElement("div",null,null!=this.state.rating_all?l.a.createElement(p.k,null,this.state.rating_all.map((function(e,t){return l.a.createElement(p.e,{key:t,before:l.a.createElement(p.a,{src:e.photo_200}),indicator:"+"+e.k+" /c",asideContent:e.current_ballans},e.name)}))):l.a.createElement(p.s,{size:"large",style:{marginTop:5}})):l.a.createElement(p.k,null,this.state.rating_team.map((function(e,t){return l.a.createElement(p.e,{key:t,before:l.a.createElement(p.a,{src:e.img}),multiline:!0,asideContent:e.sum,indicator:"+"+e.k+" /c"},e.name)})))),l.a.createElement(p.l,{id:"join",header:l.a.createElement(p.m,null,"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f"),onClose:function(){return I.setLocationHash("")},dynamicContentHeight:!0},l.a.createElement(p.d,{style:{marginTop:0,paddindBottom:100}},l.a.createElement(p.c,{mode:"shadow",size:"m"},l.a.createElement("div",{style:{height:90},align:"center",onClick:function(){e.props.joinQR(),e.setState({actievedChose:!1}),e.props.back()}},l.a.createElement(A.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR"))),l.a.createElement(p.c,{mode:"shadow",size:"m"},l.a.createElement("div",{style:{height:90},align:"center",onClick:function(){return e.setState({actievedChose:!0})}},this.state.actievedChose?l.a.createElement(F.a,{style:{position:"absolute",right:"7%"},fill:"#FF681C"}):l.a.createElement("div",null),l.a.createElement(Q.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u041f\u043e \u0445\u044d\u0448\u0443")))),this.state.actievedChose?l.a.createElement(p.g,null,l.a.createElement(p.j,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u044d\u0448",style:{marginTop:12,marginBottom:1},name:"hash",onChange:this.onChange}),l.a.createElement(p.b,{size:"xl",onClick:function(){e.props.join_by_hash(e.state.hash),e.props.back()}},"OK")):l.a.createElement("div",null)),l.a.createElement(p.l,{id:"qr",onClose:function(){return I.setLocationHash("")},header:l.a.createElement(p.m,null,"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u043f\u043e QR"),dynamicContentHeight:!0},l.a.createElement("div",{align:"center"},l.a.createElement("span",{id:"img_qr",style:{height:300,weight:"100vw"}}))),l.a.createElement(p.l,{id:"transfer",onClose:function(){return I.setLocationHash("")},header:l.a.createElement(p.m,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430")},l.a.createElement(p.g,null,l.a.createElement(p.j,{name:"count",onChange:this.onChange}),l.a.createElement(p.b,{size:"xl",onClick:this.pay},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))))}}]),a}(l.a.Component),w=a(118),R=a.n(w),K=a(119),H=a.n(K),M=a(51),G=a.n(M),D=a(52),z=a.n(D),B=a(120),q=a.n(B),x=a(121),V=a.n(x),N=a(122),U=a.n(N),L=a(123),J=a.n(L),P=a(124),Z=a.n(P),_=a(125),Y=a.n(_),W=a(126),X=a.n(W),$=new C.VKMiniAppAPI,ee="https://bot-api-vk.000webhostapp.com/api.place_quests/",te=function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).start_and_pause=function(){if(console.log(n.state.start),0==n.state.start){var e=setInterval((function(){f.a.post(ee,JSON.stringify({type:"tick",hash:n.state.user.hash})).then((function(e){n.setState({user:Object(c.a)({},n.state.user,{current_ballans:e.data.toFixed(3)})})}))}),999);n.setState({intId:e,start:!n.state.start})}else clearInterval(n.state.intId),n.setState({start:!n.state.start})},n.setSnackbar=function(e){n.setState({snackbar:e})},n.openQRreader=function(){$.openCodeReader().then((function(e){f.a.post(ee,JSON.stringify({type:"set_k",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setSnackbar(l.a.createElement(p.r,{before:l.a.createElement(G.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")):(n.setSnackbar(l.a.createElement(p.r,{before:l.a.createElement(z.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok")),n.setState({user:Object(c.a)({},n.state.user,{k:(Number(n.state.user.k)+Number(e.data)).toFixed(3)})}))}))}))},n.join_by_hash=function(e){f.a.post(ee,JSON.stringify({type:"join_group",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setSnackbar(l.a.createElement(p.r,{before:l.a.createElement(G.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")):n.setSnackbar(l.a.createElement(p.r,{before:l.a.createElement(z.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok"))}))},n.generateQR=function(){$.getUserInfo().then((function(e){var t=b.a.createQR(n.state.user.id,!0);$.setLocationHash("qr"),n.setState({qr:t})}))},n.joinQR=function(){$.openCodeReader().then((function(e){f.a.post(ee,JSON.stringify({type:"join_group",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setSnackbar(l.a.createElement(p.r,{before:l.a.createElement(G.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")):n.setSnackbar(l.a.createElement(p.r,{before:l.a.createElement(z.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok"))}))}))},n.state={user:null,userInfo:null,activeModal:null,snackbar:null,scheme:"bright_light",o:null,start:!1,intId:null,isHaveGroup:!1},n.updateConfig=n.updateConfig.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;$.initApp(),$.onUpdateConfig(this.updateConfig),f.a.post(ee,JSON.stringify({type:"log_in",obj:{url:window.location.href}})).then((function(t){console.log(t),e.setState({user:t.data}),f.a.post(ee,JSON.stringify({type:"if_have_group",hash:t.data.hash})).then((function(t){console.log(t),"ok"==t.data&&e.setState({isHaveGroup:!0})}))}))}},{key:"updateConfig",value:function(e){console.log(e),this.setState({scheme:e.scheme})}},{key:"render",value:function(){var e=this;return l.a.createElement(p.f,{isWebView:!0,scheme:this.state.scheme},l.a.createElement(p.v,{activePanel:"home",modal:l.a.createElement(j,{activeModal:this.state.activeModal,back:function(){return e.setState({activeModal:null})},joinQR:this.joinQR,user:this.state.user,join_by_hash:this.join_by_hash})},l.a.createElement(p.o,{id:"home"},l.a.createElement(p.p,{left:l.a.createElement(p.q,{onClick:function(){e.start_and_pause()}},this.state.start?l.a.createElement(V.a,null):l.a.createElement(q.a,null))},"Home"),null==this.state.user?l.a.createElement(p.s,{size:"large"}):l.a.createElement(p.h,{align:"center",header:l.a.createElement(p.i,{mode:"secondary",style:{textAlign:"center"},aside:"+"+this.state.user.k},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442")},l.a.createElement("div",null,l.a.createElement("span",{id:"balls",style:{fontSize:32,fontWeight:"bold"}},this.state.user.current_ballans," ",l.a.createElement(p.a,{src:X.a,size:42,style:{position:"absolute",right:"5%",marginTop:-42}}))),l.a.createElement(p.d,{style:{paddingTop:20,paddingBottom:15}},l.a.createElement(p.c,{size:"l",style:{backgroundImage:"linear-gradient(135deg, #f24973 0%, #3948e6 100%)"},onClick:this.openQRreader},l.a.createElement("div",{style:{height:85},align:"center"},l.a.createElement(R.a,{fill:"#FFFFFF",style:{marginTop:12}}),l.a.createElement("span",{color:"white",style:{color:"white"}},"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))),l.a.createElement(p.c,{size:"l"},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){$.setLocationHash("rating")}},l.a.createElement(H.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))),0==this.state.isHaveGroup?l.a.createElement(p.c,{size:"l",style:{backgroundImage:"linear-gradient(135deg, #9AFF7F 0%, #0BE1F5 100%)"}},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){$.setLocationHash("join")}},l.a.createElement(U.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0433\u0440\u0443\u043f\u043f\u0435"))):l.a.createElement(p.c,{size:"l",style:{backgroundColor:"#FA5959"}},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){f.a.post(ee,JSON.stringify({type:"delete",hash:e.state.user.hash})),e.setState({isHaveGroup:!1})}},l.a.createElement(J.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b"))),l.a.createElement(p.c,{size:"m",style:{backgroundColor:"#7C4BFA"}},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){e.generateQR(),e.setState({activeModal:"qr"})}},l.a.createElement(Z.a,{fill:"#fff",style:{marginTop:12}}),l.a.createElement("span",{style:{color:"white"}},"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"))),l.a.createElement(p.c,{size:"m",style:{backgroundColor:"#448BF3"}},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){return $.setLocationHash("transfer")}},l.a.createElement(Y.a,{fill:"#fff",style:{marginTop:12}}),l.a.createElement("span",{style:{color:"white"}},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"))))),this.state.snackbar)))}}]),a}(l.a.Component);o.a.send("VKWebAppInit"),i.a.render(l.a.createElement(te,null),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.77fb24cc.chunk.js.map