(this.webpackJsonpplace_quest_test=this.webpackJsonpplace_quest_test||[]).push([[0],{168:function(e,t,a){e.exports=a(273)},273:function(e,t,a){"use strict";a.r(t);a(169),a(195),a(197),a(198),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237);var n=a(0),l=a.n(n),r=a(37),s=a.n(r),i=a(26),c=a.n(i),o=a(66),u=a(44),m=a(45),h=a(46),p=a(48),d=a(49),g=a(4),f=a(30),E=a.n(f),b=(a(103),a(43)),k=a(47),y=a(114),v=a.n(y),C=a(115),_=a.n(C),S=a(116),j=a.n(S),O=new k.VKMiniAppAPI,T=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.currentTarget,a=t.name,l=t.value;n.setState(Object(b.a)({},a,l))},n.state={activeModal:"rating",activeTab:"all",actievedChose:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){O.initApp()}},{key:"render",value:function(){var e=this;return l.a.createElement(g.n,{activeModal:this.props.activeModal},l.a.createElement(g.l,{id:"rating",onClose:this.props.back,header:l.a.createElement(g.m,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),dynamicContentHeight:!0},l.a.createElement(g.t,null,l.a.createElement(g.u,{selected:"all"==this.state.activeTab,onClick:function(){return e.setState({activeTab:"all"})}},"\u041b\u0438\u0447\u043d\u044b\u0439"),l.a.createElement(g.u,{selected:"friends"==this.state.activeTab,onClick:function(){return e.setState({activeTab:"friends"})}},"\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u044b\u0439")),"all"===this.state.activeTab?l.a.createElement("div",null,null!=this.props.rating_all?l.a.createElement(g.k,null,this.props.rating_all.map((function(e,t){return l.a.createElement(g.e,{key:t,before:l.a.createElement(g.a,{src:e.photo_200}),indicator:e.current_ballans,asideContent:"+"+e.k+" /c"},e.name)}))):l.a.createElement(g.s,{size:"large",style:{marginTop:5}})):l.a.createElement(g.k,null,this.props.rating_team.map((function(e,t){return l.a.createElement(g.e,{key:t,before:l.a.createElement(g.a,{src:e.img}),indicator:e.sum,asideContent:"+"+e.k+" /c"},e.name)})))),l.a.createElement(g.l,{id:"join",header:l.a.createElement(g.m,null,"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f"),onClose:this.props.back,dynamicContentHeight:!0},l.a.createElement(g.d,{style:{marginTop:0,paddindBottom:100}},l.a.createElement(g.c,{mode:"shadow",size:"m"},l.a.createElement("div",{style:{height:90},align:"center",onClick:function(){e.props.joinQR(),e.setState({actievedChose:!1}),e.props.back()}},l.a.createElement(v.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR"))),l.a.createElement(g.c,{mode:"shadow",size:"m"},l.a.createElement("div",{style:{height:90},align:"center",onClick:function(){return e.setState({actievedChose:!0})}},this.state.actievedChose?l.a.createElement(j.a,{style:{position:"absolute",right:"7%"},fill:"#FF681C"}):l.a.createElement("div",null),l.a.createElement(_.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u041f\u043e \u0445\u044d\u0448\u0443")))),this.state.actievedChose?l.a.createElement(g.g,null,l.a.createElement(g.j,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u044d\u0448",style:{marginTop:12,marginBottom:1},name:"hash",onChange:this.onChange}),l.a.createElement(g.b,{size:"xl",onClick:function(){e.props.join_by_hash(e.state.hash),e.props.back()}},"OK")):l.a.createElement("div",null)))}}]),a}(l.a.Component),F=a(117),M=a.n(F),w=a(118),I=a.n(w),z=a(50),A=a.n(z),J=a(51),N=a.n(J),R=a(119),B=a.n(R),Q=a(120),q=a.n(Q),K=a(121),V=a.n(K),x=new k.VKMiniAppAPI,H="https://bot-api-vk.000webhostapp.com/api.place_quests/",P=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).start_and_pause=function(){if(console.log(n.state.start),0==n.state.start){var e=setInterval((function(){E.a.post(H,JSON.stringify({type:"tick",hash:n.state.user.hash})).then((function(e){n.setState({user:Object(o.a)({},n.state.user,{current_ballans:e.data})})}))}),999);n.setState({intId:e,start:!n.state.start})}else clearInterval(n.state.intId),n.setState({start:!n.state.start})},n.go_rating=function(){E.a.post(H,JSON.stringify({type:"get_rating"})).then((function(e){console.log(e),n.setState({rating_all:e.data})})),E.a.post(H,JSON.stringify({type:"get_rating_team"})).then((function(e){n.setState({rating_team:e.data})}))},n.setSnackbar=function(e){n.setState({snackbar:e})},n.openQRreader=function(){x.openCodeReader().then((function(e){E.a.post(H,JSON.stringify({type:"set_k",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setSnackbar(l.a.createElement(g.r,{before:l.a.createElement(A.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")):(n.setSnackbar(l.a.createElement(g.r,{before:l.a.createElement(N.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok")),n.setState({user:Object(o.a)({},n.state.user,{k:Number(n.state.user.k)+Number(e.data)})}))}))}))},n.join_by_hash=function(e){E.a.post(H,JSON.stringify({type:"join_group",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setSnackbar(l.a.createElement(g.r,{before:l.a.createElement(A.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")):n.setSnackbar(l.a.createElement(g.r,{before:l.a.createElement(N.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok"))}))},n.joinQR=function(){x.openCodeReader().then((function(e){E.a.post(H,JSON.stringify({type:"join_group",hash:n.state.user.hash,key:e})).then((function(e){"not"==e.data?n.setSnackbar(l.a.createElement(g.r,{before:l.a.createElement(A.a,{fill:"#FB2626"}),onClose:function(){return n.setState({snackbar:null})}},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")):n.setSnackbar(l.a.createElement(g.r,{before:l.a.createElement(N.a,{fill:"#00CE40"}),onClose:function(){return n.setState({snackbar:null})}},"Ok"))}))}))},n.state={user:null,userInfo:null,activeModal:null,rating_all:null,rating_team:null,snackbar:null,scheme:"bright_light",o:null,start:!1,intId:null},n.updateConfig=n.updateConfig.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;x.initApp(),x.onUpdateConfig(this.updateConfig),E.a.post(H,JSON.stringify({type:"log_in",obj:{url:window.location.href}})).then((function(t){console.log(t),e.setState({user:t.data})}))}},{key:"updateConfig",value:function(e){console.log(e),this.setState({scheme:e.scheme})}},{key:"render",value:function(){var e=this;return l.a.createElement(g.f,{isWebView:!0,scheme:this.state.scheme},l.a.createElement(g.v,{activePanel:"home",modal:l.a.createElement(T,{activeModal:this.state.activeModal,back:function(){return e.setState({activeModal:null})},rating_all:this.state.rating_all,rating_team:this.state.rating_team,joinQR:this.joinQR,join_by_hash:this.join_by_hash})},l.a.createElement(g.o,{id:"home"},l.a.createElement(g.p,{left:l.a.createElement(g.q,{onClick:function(){e.start_and_pause()}},this.state.start?l.a.createElement(q.a,null):l.a.createElement(B.a,null))},"Home"),null==this.state.user?l.a.createElement(g.s,{size:"large"}):l.a.createElement(g.h,{align:"center",header:l.a.createElement(g.i,{mode:"secondary",style:{textAlign:"center"},aside:"+"+this.state.user.k},"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442")},l.a.createElement("span",{style:{fontSize:"350%",fontWeight:"bold"}},this.state.user.current_ballans),l.a.createElement(g.d,{style:{paddingTop:20}},l.a.createElement(g.c,{size:"l",style:{backgroundImage:"linear-gradient(135deg, #f24973 0%, #3948e6 100%)"},onClick:this.openQRreader},l.a.createElement("div",{style:{height:85},align:"center"},l.a.createElement(M.a,{fill:"#FFFFFF",style:{marginTop:12}}),l.a.createElement("span",{color:"white",style:{color:"white"}},"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))),l.a.createElement(g.c,{size:"l"},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){e.setState({activeModal:"rating"}),e.go_rating()}},l.a.createElement(I.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))),l.a.createElement(g.c,{size:"l",style:{backgroundImage:"linear-gradient(135deg, #9AFF7F 0%, #0BE1F5 100%)"}},l.a.createElement("div",{style:{height:85},align:"center",onClick:function(){e.setState({activeModal:"join"})}},l.a.createElement(V.a,{style:{marginTop:12}}),l.a.createElement("span",null,"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0435\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0433\u0440\u0443\u043f\u043f\u0435")))),this.state.o),this.state.snackbar)))}}]),a}(l.a.Component);c.a.send("VKWebAppInit"),s.a.render(l.a.createElement(P,null),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.a5b0015c.chunk.js.map