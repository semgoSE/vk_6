{"version":3,"sources":["panels/Modal.js","App.js","index.js"],"names":["api","VKMiniAppAPI","Modal","props","state","activeModal","activeTab","initApp","this","id","onClose","back","header","dynamicContentHeight","selected","onClick","setState","rating_all","map","data","i","key","before","src","photo_200","indicator","current_ballans","asideContent","k","name","size","React","Component","App","updateConfig","o","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","go_rating","Axios","post","JSON","stringify","type","then","console","log","openQRreader","openCodeReader","hash","user","snackbar","fill","Number","userInfo","onUpdateConfig","obj","url","window","location","href","setInterval","isWebView","activePanel","modal","align","mode","style","textAlign","aside","fontSize","fontWeight","paddingTop","backgroundImage","height","marginTop","color","bridge","send","ReactDOM","render","getElementById"],"mappings":"kkBAOMA,EAAM,IAAIC,eAiDDC,E,kDA9CX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACCC,MAAQ,CACTC,YAAa,SACbC,UAAU,OAJD,E,gEAUfN,EAAIO,Y,+BAKI,IAAD,OACL,OACI,kBAAC,IAAD,CAAWF,YAAaG,KAAKL,MAAME,aACjC,kBAAC,IAAD,CAAWI,GAAG,SAASC,QAASF,KAAKL,MAAMQ,KAAMC,OAAQ,kBAAC,IAAD,mDAA4CC,sBAAoB,GAErH,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUC,SAAkC,OAAxBN,KAAKJ,MAAME,UAAoBS,QAAS,kBAAI,EAAKC,SAAS,CAACV,UAAW,UAA1F,kCACA,kBAAC,IAAD,CAAUQ,SAAkC,WAAxBN,KAAKJ,MAAME,UAAwBS,QAAS,kBAAI,EAAKC,SAAS,CAACV,UAAW,cAA9F,yCAIwB,QAAzBE,KAAKJ,MAAME,UACX,6BAC4B,MAAzBE,KAAKL,MAAMc,WACd,kBAAC,IAAD,KACGT,KAAKL,MAAMc,WAAWC,KAAI,SAACC,EAAKC,GAAN,OACzB,kBAAC,IAAD,CAAMC,IAAKD,EAAGE,OAAQ,kBAAC,IAAD,CAAQC,IAAKJ,EAAKK,YAAeC,UAAWN,EAAKO,gBAAiBC,aAAc,IAAIR,EAAKS,EAAE,OAAQT,EAAKU,UAIlI,kBAAC,IAAD,CAASC,KAAK,WAGd,oC,GAvCDC,IAAMC,W,wECIpBhC,EAAM,IAAIC,eAoGDgC,E,kDAjGd,WAAY9B,GAAQ,IAAD,8BACjB,cAAMA,IA6BP+B,aAAe,SAACC,GAChB,IAAMC,EAAkBC,SAASC,gBAAgB,UACjDF,EAAgBG,MAAQJ,EAAEK,OAASL,EAAEK,OAAS,eAC9CH,SAASI,KAAKC,WAAWC,aAAaP,GACtC,EAAKpB,SAAS,CAACwB,OAAQL,EAAEK,OAAQL,EAAEA,KAlCjB,EAsCnBS,UAAY,WACXC,IAAMC,KAAK,yDAA0DC,KAAKC,UAAU,CAACC,KAAK,gBAAgBC,MAAK,SAAA/B,GAC9GgC,QAAQC,IAAIjC,GACZ,EAAKH,SAAS,CAACC,WAAYE,EAAKA,WAzCf,EA6CnBkC,aAAe,WACdrD,EAAIsD,iBACHJ,MAAK,SAAA/B,GACL0B,IAAMC,KAAK,yDAA0DC,KAAKC,UAAU,CAACC,KAAK,QAASM,KAAK,EAAKnD,MAAMoD,KAAKD,KAAMlC,IAAIF,KACjI+B,MAAK,SAAA/B,GACsB,OAAbA,EAAKA,KACN,EAAKH,SAAS,CAACyC,SAAU,kBAAC,IAAD,CAAUnC,OAAQ,kBAAC,IAAD,CAA2BoC,KAAK,YAAahD,QAAS,kBAAI,EAAKM,SAAS,CAACyC,SAAU,SAArG,sDAEtC,EAAKzC,SAAS,CAACyC,SAAU,kBAAC,IAAD,CAAUnC,OAAQ,kBAAC,IAAD,CAAmBoC,KAAK,YAAahD,QAAS,kBAAI,EAAKM,SAAS,CAACyC,SAAU,SAA7F,MAAoHD,KAAK,eAC9I,EAAKpD,MAAMoD,KADkI,CAEhJ5B,EAAE+B,OAAO,EAAKvD,MAAMoD,KAAK5B,GAAG+B,OAAOxC,EAAKA,iBArD1C,EAAKf,MAAQ,CACboD,KAAK,KACLI,SAAS,KACTvD,YAAY,KACZY,WAAW,KACXwC,SAAS,KACTjB,OAAQ,eACRL,EAAE,MATe,E,gEAaK,IAAD,OACtBnC,EAAIO,UACJP,EAAI6D,eAAerD,KAAK0B,gBACxBW,IAAMC,KAAK,yDAAyDC,KAAKC,UAAU,CAACC,KAAK,SAASa,IAAI,CAACC,IAAIC,OAAOC,SAASC,SAAShB,MAAK,SAAA/B,GACxIgC,QAAQC,IAAIjC,GACX,EAAKH,SAAS,CAACwC,KAAKrC,EAAKA,UAGxBgD,aAAY,WACbtB,IAAMC,KAAK,yDAA0DC,KAAKC,UAAU,CAACC,KAAK,OAAQM,KAAK,EAAKnD,MAAMoD,KAAKD,QACtHL,MAAK,SAAA/B,GAAO,EAAKH,SAAS,CAACwC,KAAK,eAC7B,EAAKpD,MAAMoD,KADiB,CAE/B9B,gBAAgBP,EAAKA,cAElB,O,+BAoCG,IAAD,OACR,OACD,kBAAC,IAAD,CAAgBiD,WAAW,EAAM5B,OAAQhC,KAAKJ,MAAMoC,QACnD,kBAAC,IAAD,CAAM6B,YAAY,OAAOC,MAAO,kBAAC,EAAD,CAAOjE,YAAaG,KAAKJ,MAAMC,YAAaM,KAAM,kBAAI,EAAKK,SAAS,CAACX,YAAY,QAAQY,WAAYT,KAAKJ,MAAMa,cACxI,kBAAC,IAAD,CAAOR,GAAG,QACT,kBAAC,IAAD,aACqB,MAAnBD,KAAKJ,MAAMoD,KAAe,kBAAC,IAAD,CAAS1B,KAAK,UAChD,kBAAC,IAAD,CAAOyC,MAAM,SAAS3D,OAAQ,kBAAC,IAAD,CAAQ4D,KAAK,YAAYC,MAAO,CAACC,UAAW,UAAWC,MAAO,IAAInE,KAAKJ,MAAMoD,KAAK5B,GAAlF,gDAC3B,0BAAM6C,MAAO,CAACG,SAAS,OAAQC,WAAW,SAAUrE,KAAKJ,MAAMoD,KAAK9B,iBACvE,kBAAC,IAAD,CAAU+C,MAAO,CAACK,WAAW,KAC3B,kBAAC,IAAD,CAAMhD,KAAK,IAAI2C,MAAO,CAACM,gBAAiB,qDAAsDhE,QAASP,KAAK6C,cAC3G,yBAAKoB,MAAO,CAACO,OAAO,IAAKT,MAAM,UAC9B,kBAAC,IAAD,CAAcb,KAAK,UAASe,MAAO,CAACQ,UAAU,MAC9C,0BAAMC,MAAM,QAAQT,MAAO,CAACS,MAAO,UAAnC,wEAGF,kBAAC,IAAD,CAAMpD,KAAK,KACN,yBAAK2C,MAAO,CAACO,OAAO,IAAKT,MAAM,SAASxD,QAAS,WAAK,EAAKC,SAAS,CAACX,YAAY,WAAY,EAAKuC,cACvG,kBAAC,IAAD,MACA,+EAIDpC,KAAKJ,MAAM+B,GAGb3B,KAAKJ,MAAMqD,gB,GA1FG1B,IAAMC,WCPxBmD,IAAOC,KAAK,gBAEZC,IAASC,OAAO,kBAAC,EAAD,MAASjD,SAASkD,eAAe,W","file":"static/js/main.5f1f6675.chunk.js","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { Spinner, Avatar, ModalRoot, ModalPage, ModalPageHeader, Tabs, TabsItem, List, Cell} from '@vkontakte/vkui';\r\nimport Axios from 'axios';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { VKMiniAppAPI } from '@vkontakte/vk-mini-apps-api';\r\n\r\nconst api = new VKMiniAppAPI();\r\n\r\nclass Modal extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n          this.state = {\r\n              activeModal: 'rating',\r\n              activeTab:'all',\r\n\r\n          }\r\n    }\r\n\r\n      componentDidMount() {\r\n        api.initApp();\r\n\r\n      }\r\n\r\n\r\n      render() {\r\n          return(\r\n              <ModalRoot activeModal={this.props.activeModal}>\r\n                <ModalPage id=\"rating\" onClose={this.props.back} header={<ModalPageHeader>Рейтинг</ModalPageHeader>} dynamicContentHeight>\r\n\r\n                    <Tabs>\r\n                      <TabsItem selected={this.state.activeTab == 'all'} onClick={()=>this.setState({activeTab: 'all'})}>Общий</TabsItem>\r\n                      <TabsItem selected={this.state.activeTab == 'friends'} onClick={()=>this.setState({activeTab: 'friends'})}>Друзья</TabsItem>\r\n                    </Tabs>\r\n\r\n\r\n                    {this.state.activeTab === 'all' ? \r\n                     <div>\r\n                       {this.props.rating_all != null ? \r\n                     <List>\r\n                       {this.props.rating_all.map((data,i)=>\r\n                         <Cell key={i} before={<Avatar src={data.photo_200} />} indicator={data.current_ballans} asideContent={\"+\"+data.k+\" /c\"}>{data.name}</Cell>\r\n                       )}\r\n                        \r\n                     </List>:\r\n                     <Spinner size=\"large\" /> }\r\n                     </div>  \r\n                     :\r\n                     <div />\r\n      }\r\n                </ModalPage>\r\n              </ModalRoot>\r\n          )\r\n      }\r\n}\r\n\r\nexport default Modal","import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {View, Panel, Group, PanelHeader, Spinner, Header, Card, CardGrid, Avatar, Snackbar, ConfigProvider} from '@vkontakte/vkui';\nimport Axios from 'axios';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Modal from './panels/Modal';\nimport Icon48Camera from '@vkontakte/icons/dist/48/camera';\nimport Icon56LinkCircleOutline from '@vkontakte/icons/dist/56/link_circle_outline';\nimport { VKMiniAppAPI } from '@vkontakte/vk-mini-apps-api';\nimport Icon28CancelCircleOutline from '@vkontakte/icons/dist/28/cancel_circle_outline';\nimport Icon28DoneOutline from '@vkontakte/icons/dist/28/done_outline';\n\nconst api = new VKMiniAppAPI();\n\nclass App extends React.Component {\n constructor(props) {\n   super(props)\n   this.state = {\n\t  user:null,\n\t  userInfo:null,\n\t  activeModal:null,\n\t  rating_all:null,\n\t  snackbar:null,\n\t  scheme: \"bright_light\",\n\t  o:null\n   }\n }\n\n    componentDidMount() {\n\t\tapi.initApp();\n\t\tapi.onUpdateConfig(this.updateConfig())\n\t\tAxios.post('https://bot-api-vk.000webhostapp.com/api.place_quests/',JSON.stringify({type:\"log_in\",obj:{url:window.location.href}})).then(data=>{\n\t\t\tconsole.log(data)\n\t\t\t this.setState({user:data.data});\n            \n\t\t   })\n\t\t   setInterval(()=>{\n\t\t\t Axios.post(\"https://bot-api-vk.000webhostapp.com/api.place_quests/\", JSON.stringify({type:'tick', hash:this.state.user.hash}))\n\t\t\t .then(data=>{this.setState({user:{\n\t\t\t\t ...this.state.user,\n\t\t\t\t current_ballans:data.data\n\t\t\t }})})\n\t\t   }, 999)\n\t}\n\n\t updateConfig = (o) => {\n\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\tschemeAttribute.value = o.scheme ? o.scheme : 'client_light';\n\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\tthis.setState({scheme: o.scheme, o:o})\n\t\t \n\t }\n\n\tgo_rating = () => {\n\t\tAxios.post(\"https://bot-api-vk.000webhostapp.com/api.place_quests/\", JSON.stringify({type:\"get_rating\"})).then(data=>{\n\t\t\tconsole.log(data);\n\t\t\tthis.setState({rating_all: data.data})\n\t\t  })\n\t\t}\n\n\topenQRreader = () => {\n\t\tapi.openCodeReader()\n\t\t.then(data=>{\n\t\t\tAxios.post(\"https://bot-api-vk.000webhostapp.com/api.place_quests/\", JSON.stringify({type:\"set_k\", hash:this.state.user.hash, key:data}))\n\t\t\t.then(data=>{\n               if(data.data == 'not') {\n                 this.setState({snackbar: <Snackbar before={<Icon28CancelCircleOutline fill=\"#FB2626\"/>} onClose={()=>this.setState({snackbar: null})}>Ошибочка</Snackbar>})\n\t\t\t   }else {\n\t\t\t\tthis.setState({snackbar: <Snackbar before={<Icon28DoneOutline fill=\"#00CE40\"/>} onClose={()=>this.setState({snackbar: null})}>Ok</Snackbar>, user:{\n\t\t\t\t\t...this.state.user,\n\t\t\t\t\tk:Number(this.state.user.k)+Number(data.data)\n\t\t\t\t}})\n\t\t\t   }\n\t\t\t})\n\t\t})\n\t}\t\n\t\n\n\trender() {\n\t\treturn(\n\t<ConfigProvider isWebView={true} scheme={this.state.scheme}>\t\t\n\t\t<View activePanel=\"home\" modal={<Modal activeModal={this.state.activeModal} back={()=>this.setState({activeModal:null})} rating_all={this.state.rating_all} />}>\n          <Panel id=\"home\">\n           <PanelHeader>Home</PanelHeader>\n            {this.state.user == null ? <Spinner size=\"large\"/> :\n\t\t\t  <Group align=\"center\" header={<Header mode='secondary' style={{textAlign: 'center'}} aside={\"+\"+this.state.user.k}>Ваш счет</Header>}>\n\t\t\t     <span style={{fontSize:\"350%\", fontWeight:\"bold\"}}>{this.state.user.current_ballans}</span>\n\t\t\t\t <CardGrid style={{paddingTop:20}}>\n\t\t\t\t   <Card size='l' style={{backgroundImage: 'linear-gradient(135deg, #f24973 0%, #3948e6 100%)'}} onClick={this.openQRreader}>\n\t\t\t\t\t   <div style={{height:85}} align='center'>\n\t\t\t\t\t\t   <Icon48Camera fill=\"#FFFFFF\"style={{marginTop:12}}/>  \n\t\t\t\t\t\t   <span color='white' style={{color: 'white'}}>Сканировать</span>\n\t\t\t\t\t   </div>\n\t\t\t\t   </Card>\n\t\t\t\t   <Card size='l'>\n\t\t\t\t        <div style={{height:85}} align='center' onClick={()=>{this.setState({activeModal:'rating'}); this.go_rating()}}>\n\t\t\t\t\t\t\t<Icon56LinkCircleOutline />\n\t\t\t\t\t\t\t<span>Рейтинг</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t   </Card>\n\t\t\t\t </CardGrid>\n\t\t\t\t {this.state.o}\n\t\t\t  </Group>\n\t\t\t}\n\t\t\t{this.state.snackbar}\n\t\t  </Panel>\n\t\t</View>\n\t</ConfigProvider>\t\n\t\t)\n\t}\n\n}\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(eruda => {}); //runtime download\n}\n"],"sourceRoot":""}