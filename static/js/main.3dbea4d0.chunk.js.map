{"version":3,"sources":["panels/Modal.js","App.js","index.js"],"names":["api","VKMiniAppAPI","Modal","props","state","activeModal","activeTab","initApp","this","id","onClose","back","header","dynamicContentHeight","selected","onClick","setState","rating_all","map","data","i","key","before","src","photo_200","indicator","current_ballans","asideContent","k","name","size","React","Component","App","go_rating","Axios","post","JSON","stringify","type","then","console","log","openQRreader","openCodeReader","hash","user","snackbar","fill","userInfo","obj","url","window","location","href","setInterval","activePanel","modal","align","mode","style","textAlign","aside","fontSize","fontWeight","paddingTop","backgroundImage","height","marginTop","color","bridge","send","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3dbea4d0.chunk.js","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { Spinner, Avatar, ModalRoot, ModalPage, ModalPageHeader, Tabs, TabsItem, List, Cell} from '@vkontakte/vkui';\r\nimport Axios from 'axios';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { VKMiniAppAPI } from '@vkontakte/vk-mini-apps-api';\r\n\r\nconst api = new VKMiniAppAPI();\r\n\r\nclass Modal extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n          this.state = {\r\n              activeModal: 'rating',\r\n              activeTab:'all',\r\n\r\n          }\r\n    }\r\n\r\n      componentDidMount() {\r\n        api.initApp();\r\n\r\n      }\r\n\r\n\r\n      render() {\r\n          return(\r\n              <ModalRoot activeModal={this.props.activeModal}>\r\n                <ModalPage id=\"rating\" onClose={this.props.back} header={<ModalPageHeader>Рейтинг</ModalPageHeader>} dynamicContentHeight>\r\n\r\n                    <Tabs>\r\n                      <TabsItem selected={this.state.activeTab == 'all'} onClick={()=>this.setState({activeTab: 'all'})}>Общий</TabsItem>\r\n                      <TabsItem selected={this.state.activeTab == 'friends'} onClick={()=>this.setState({activeTab: 'friends'})}>Друзья</TabsItem>\r\n                    </Tabs>\r\n\r\n\r\n                    {this.state.activeTab === 'all' ? \r\n                     <div>\r\n                       {this.props.rating_all != null ? \r\n                     <List>\r\n                       {this.props.rating_all.map((data,i)=>\r\n                         <Cell key={i} before={<Avatar src={data.photo_200} />} indicator={data.current_ballans} asideContent={\"+\"+data.k+\" /c\"}>{data.name}</Cell>\r\n                       )}\r\n                        \r\n                     </List>:\r\n                     <Spinner size=\"large\" /> }\r\n                     </div>  \r\n                     :\r\n                     <div />\r\n      }\r\n                </ModalPage>\r\n              </ModalRoot>\r\n          )\r\n      }\r\n}\r\n\r\nexport default Modal","import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {View, Panel, Group, PanelHeader, Spinner, Header, Card, CardGrid, Avatar, Snackbar} from '@vkontakte/vkui';\nimport Axios from 'axios';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Modal from './panels/Modal';\nimport Icon48Camera from '@vkontakte/icons/dist/48/camera';\nimport Icon56LinkCircleOutline from '@vkontakte/icons/dist/56/link_circle_outline';\nimport { VKMiniAppAPI } from '@vkontakte/vk-mini-apps-api';\nimport Icon28CancelCircleOutline from '@vkontakte/icons/dist/28/cancel_circle_outline';\nimport Icon28DoneOutline from '@vkontakte/icons/dist/28/done_outline';\n\nconst api = new VKMiniAppAPI();\n\nclass App extends React.Component {\n constructor(props) {\n   super(props)\n   this.state = {\n\t  user:null,\n\t  userInfo:null,\n\t  activeModal:null,\n\t  rating_all:null,\n\t  snackbar:null\n   }\n }\n\n    componentDidMount() {\n\t\tapi.initApp();\n\t\tAxios.post('https://bot-api-vk.000webhostapp.com/api.place_quests/',JSON.stringify({type:\"log_in\",obj:{url:window.location.href}})).then(data=>{\n\t\t\tconsole.log(data)\n\t\t\t this.setState({user:data.data});\n            \n\t\t   })\n\t\t   setInterval(()=>{\n\t\t\t Axios.post(\"https://bot-api-vk.000webhostapp.com/api.place_quests/\", JSON.stringify({type:'tick', hash:this.state.user.hash}))\n\t\t\t .then(data=>{this.setState({user:{\n\t\t\t\t ...this.state.user,\n\t\t\t\t current_ballans:data.data\n\t\t\t }})})\n\t\t   }, 999)\n\t}\n\n\tgo_rating = () => {\n\t\tAxios.post(\"https://bot-api-vk.000webhostapp.com/api.place_quests/\", JSON.stringify({type:\"get_rating\"})).then(data=>{\n\t\t\tconsole.log(data);\n\t\t\tthis.setState({rating_all: data.data})\n\t\t  })\n\t\t}\n\n\topenQRreader = () => {\n\t\tapi.openCodeReader()\n\t\t.then(data=>{\n\t\t\tAxios.post(\"https://bot-api-vk.000webhostapp.com/api.place_quests/\", JSON.stringify({type:\"set_k\", hash:this.state.user.hash, key:data}))\n\t\t\t.then(data=>{\n               if(data.data == 'not') {\n                 this.setState({snackbar: <Snackbar before={<Icon28CancelCircleOutline fill=\"#FB2626\"/>} onClose={()=>this.setState({snackbar: null})}>Ошибочка</Snackbar>})\n\t\t\t   }else {\n\t\t\t\tthis.setState({snackbar: <Snackbar before={<Icon28DoneOutline fill=\"#00CE40\"/>} onClose={()=>this.setState({snackbar: null})}>Ok</Snackbar>, user:{\n\t\t\t\t\t...this.state.user,\n\t\t\t\t\tk:this.state.user.k+data.data\n\t\t\t\t}})\n\t\t\t   }\n\t\t\t})\n\t\t})\n\t}\t\n\t\n\n\trender() {\n\t\treturn(\n\t\t<View activePanel=\"home\" modal={<Modal activeModal={this.state.activeModal} back={()=>this.setState({activeModal:null})} rating_all={this.state.rating_all} />}>\n          <Panel id=\"home\">\n           <PanelHeader>Home</PanelHeader>\n            {this.state.user == null ? <Spinner size=\"large\"/> :\n\t\t\t  <Group align=\"center\" header={<Header mode='secondary' style={{textAlign: 'center'}} aside={\"+\"+this.state.user.k}>Ваш счет</Header>}>\n\t\t\t     <span style={{fontSize:\"350%\", fontWeight:\"bold\"}}>{this.state.user.current_ballans}</span>\n\t\t\t\t <CardGrid style={{paddingTop:20}}>\n\t\t\t\t   <Card size='l' style={{backgroundImage: 'linear-gradient(135deg, #f24973 0%, #3948e6 100%)'}} onClick={this.openQRreader}>\n\t\t\t\t\t   <div style={{height:85}} align='center'>\n\t\t\t\t\t\t   <Icon48Camera fill=\"#FFFFFF\"style={{marginTop:12}}/>  \n\t\t\t\t\t\t   <span color='white' style={{color: 'white'}}>Сканировать</span>\n\t\t\t\t\t   </div>\n\t\t\t\t   </Card>\n\t\t\t\t   <Card size='l'>\n\t\t\t\t        <div style={{height:85}} align='center' onClick={()=>{this.setState({activeModal:'rating'}); this.go_rating()}}>\n\t\t\t\t\t\t\t<Icon56LinkCircleOutline />\n\t\t\t\t\t\t\t<span>Рейтинг</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t   </Card>\n\t\t\t\t </CardGrid>\n\t\t\t  </Group>\n\t\t\t}\n\t\t\t{this.state.snackbar}\n\t\t  </Panel>\n\t\t</View>\n\t\t)\n\t}\n\n}\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(eruda => {}); //runtime download\n}\n"],"sourceRoot":""}